###############
## Variables ##
###############
# Keys
set $modAlt Mod1
set $modSuper Mod4
set $modShift Shift
set $modCtrl Ctrl
set $keySuper 133

# Monitors
set $mon_1 "HDMI-0"
set $mon_2 "HDMI-0_p2"
set $mon_3 "DVI-I-1"

# Workspaces
set $ws_1 "1"
set $ws_2 "2"
set $ws_3 "3"
set $ws_4 "4"
set $ws_5 "5"
set $ws_6 "6"
set $ws_7 "7"
set $ws_8 "8"
set $ws_9 "9"
set $ws_0 "0"

# Colors
set_from_resource $color_foreground     i3wm.foreground     #ffffff
set_from_resource $color_background     i3wm.background     #000000
set_from_resource $color_cursor         i3wm.cursorColor    #ffffff
set_from_resource $color_normal_black   i3wm.color0         #000000
set_from_resource $color_bright_black   i3wm.color8         #ffffff
set_from_resource $color_normal_red     i3wm.color1         #000000
set_from_resource $color_bright_red     i3wm.color9         #ffffff
set_from_resource $color_normal_green   i3wm.color2         #000000
set_from_resource $color_bright_green   i3wm.color10        #ffffff
set_from_resource $color_normal_yellow  i3wm.color3         #000000
set_from_resource $color_bright_yellow  i3wm.color11        #ffffff
set_from_resource $color_normal_blue    i3wm.color4         #000000
set_from_resource $color_bright_blue    i3wm.color12        #ffffff
set_from_resource $color_normal_magenta i3wm.color5         #000000
set_from_resource $color_bright_magenta i3wm.color13        #ffffff
set_from_resource $color_normal_cyan    i3wm.color6         #000000
set_from_resource $color_bright_cyan    i3wm.color14        #ffffff
set_from_resource $color_normal_white   i3wm.color7         #000000
set_from_resource $color_bright_white   i3wm.color15        #ffffff
set $color_transparent #00000000

##################
## Key bindings ##
##################
# System
bindsym $modSuper+$modCtrl+$modAlt+r exec --no-startup-id "reload"
bindsym $modSuper+$modCtrl+$modAlt+k exec --no-startup-id "sh $DOTFILES/sh_scripts/toggle-keyboard-layout.sh"
bindsym $modSuper+$modCtrl+$modAlt+m exec --no-startup-id "sh $DOTFILES/sh_scripts/toggle-split-monitor.sh"
bindsym $modSuper+$modCtrl+$modAlt+l exec --no-startup-id "blurlock"
bindsym $modSuper+$modCtrl+$modAlt+c exec --no-startup-id "code $DOTFILES/"

# System Power Menu
bindsym $modSuper+Escape exec --no-startup-id rofi -modi "power:sh $DOTFILES/sh_scripts/rofi-modi-power.sh" -show power

# Start Apps
bindcode $keySuper --release exec --no-startup-id "rofi -modi drun -show drun"
bindsym $modSuper+Return exec --no-startup-id "i3-sensible-terminal"

# Kill Apps
bindsym $modSuper+q kill

# Print screen
bindsym Print exec --no-startup-id "i3-scrot"
bindsym $modSuper+Print --release exec --no-startup-id "i3-scrot -w"
bindsym $modSuper+Shift+Print --release exec --no-startup-id "i3-scrot -s"

# Change window layouts
bindsym $modSuper+f fullscreen toggle
bindsym $modSuper+$modAlt+space split toggle

# Focus window
bindsym $modSuper+Tab exec --no-startup-id "rofi -modi window -show window"
bindsym $modSuper+Left focus left
bindsym $modSuper+Right focus right
bindsym $modSuper+Up focus up
bindsym $modSuper+Down focus down

# Move window
bindsym $modSuper+$modCtrl+Left move left
bindsym $modSuper+$modCtrl+Right move right
bindsym $modSuper+$modCtrl+Up move up
bindsym $modSuper+$modCtrl+Down move down

# Resize window
bindsym $modSuper+$modAlt+Left resize shrink width 10 px or 10 ppt
bindsym $modSuper+$modAlt+Right resize grow width 10 px or 10 ppt
bindsym $modSuper+$modAlt+Up resize grow height 10 px or 10 ppt
bindsym $modSuper+$modAlt+Down resize shrink height 10 px or 10 ppt

# Workspace selection
bindsym $modSuper+1 workspace $ws_1
bindsym $modSuper+2 workspace $ws_2
bindsym $modSuper+3 workspace $ws_3
bindsym $modSuper+4 workspace $ws_4
bindsym $modSuper+5 workspace $ws_5
bindsym $modSuper+6 workspace $ws_6
bindsym $modSuper+7 workspace $ws_7
bindsym $modSuper+8 workspace $ws_8
bindsym $modSuper+9 workspace $ws_9
bindsym $modSuper+0 workspace $ws_0

# Move windows to workspace
bindsym $modSuper+$modCtrl+1 move container to workspace $ws_1
bindsym $modSuper+$modCtrl+2 move container to workspace $ws_2
bindsym $modSuper+$modCtrl+3 move container to workspace $ws_3
bindsym $modSuper+$modCtrl+4 move container to workspace $ws_4
bindsym $modSuper+$modCtrl+5 move container to workspace $ws_5
bindsym $modSuper+$modCtrl+6 move container to workspace $ws_6
bindsym $modSuper+$modCtrl+7 move container to workspace $ws_7
bindsym $modSuper+$modCtrl+8 move container to workspace $ws_8
bindsym $modSuper+$modCtrl+9 move container to workspace $ws_9
bindsym $modSuper+$modCtrl+0 move container to workspace $ws_0

# Volume keys
bindsym XF86AudioRaiseVolume exec --no-startup-id "pactl set-sink-volume 0 +10%"
bindsym XF86AudioLowerVolume exec --no-startup-id "pactl set-sink-volume 0 -10%"
bindsym XF86AudioMute exec --no-startup-id "pactl set-sink-mute 0 toggle"

# Media player keys
bindsym XF86AudioPlay exec --no-startup-id "playerctl play"
bindsym XF86AudioPause exec --no-startup-id "playerctl pause"
bindsym XF86AudioNext exec --no-startup-id "playerctl next"
bindsym XF86AudioPrev exec --no-startup-id "playerctl previous"

# Backlight keys
bindsym XF86MonBrightnessUp exec "xbacklight -inc 10; notify-send 'brightness up'"
bindsym XF86MonBrightnessDown exec "xbacklight -dec 10; notify-send 'brightness down'"

###################
## Look and feel ##
###################
# Font
font pango:FiraCode 10, FontAwesome 8

# Borders
default_border pixel 2
default_floating_border pixel 2

# class                 border              backgr.             text                indicator           child_border
client.focused          $color_bright_green $color_normal_black $color_bright_green $color_bright_green $color_normal_green
client.focused_inactive $color_bright_blue  $color_normal_black $color_bright_blue  $color_bright_blue  $color_normal_blue
client.unfocused        $color_bright_black $color_normal_black $color_bright_black $color_bright_black $color_normal_black
client.urgent           $color_bright_red   $color_normal_black $color_bright_red   $color_bright_red   $color_normal_red
client.placeholder      $color_bright_black $color_normal_black $color_bright_black $color_bright_black $color_normal_black
client.background       $color_background

# Gaps
smart_gaps on
smart_borders on
gaps inner 14
gaps outer -2

##############
## Behavior ##
##############
focus_follows_mouse no
focus_on_window_activation focus

workspace $ws_1 output $mon_1
workspace $ws_2 output $mon_1
workspace $ws_3 output $mon_1
workspace $ws_4 output $mon_1
workspace $ws_5 output $mon_1
workspace $ws_6 output $mon_1
workspace $ws_7 output $mon_1
workspace $ws_8 output $mon_2
workspace $ws_9 output $mon_2
workspace $ws_0 output $mon_3

#############
## Startup ##
#############
exec --no-startup-id "nitrogen --restore"
exec --no-startup-id "compton -b"
exec --no-startup-id "redshift"
exec_always --no-startup-id "sh $DOTFILES/sh_scripts/start-polybar.sh"

# polkit is an application-level toolkit for defining and handling the policy that allows unprivileged processes to speak to privileged processes
exec --no-startup-id "/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1"