#!/bin/sh
if [[ -z $DOTFILES ]]
then
    echo "\$DOTFILES not set"
    exit 1
fi

if [[ -z $1 ]]
then
    echo "Usage: $0 path/to/image.jpg"
    exit 1
fi

dest_walpaper="$DOTFILES/walpaper.${1##*.}"
echo $dest_walpaper
cp "$1" "$dest_walpaper"
wal --saturate 0.9 -n -i $1
nitrogen --set-auto --save $dest_walpaper

cp "$HOME/.cache/wal/xresources-00-base"      "$DOTFILES/configs/.config/Xresources.d/00-base"
cp "$HOME/.cache/wal/dunstrc"                 "$DOTFILES/configs/.config/dunst/dunstrc"
cp "$HOME/.cache/wal/rofi-my-dark-theme.rasi" "$DOTFILES/configs/.config/rofi/rofi-my-dark-theme.rasi"
$DOTFILES/bin/.reload
