#!/bin/sh
# Apply an existing theme

if [[ -z $1 ]]
then
    # TODO TUI to select theme
    echo "Usage: $0 theme-name"
    exit 1
fi

if [[ $1 =~ "[A-z0-9\-_]+" ]]
then
  echo "Invalid theme name. Must match regex patern '[A-z0-9\-_]+'"
  exit 1
fi

if [[ $1 == "current" ]]
then
  echo "Invalid theme name. The theme name 'current' is reserved"
  exit 1
fi

# Link theme configs
ln -fs "$DOTFILES/themes/$1" "$DOTFILES/themes/current"

# Apply wallpaper
nitrogen --head=0 --set-zoom-fill --save "$DOTFILES/themes/$1/wallpaper.*"
nitrogen --head=1 --set-zoom-fill --save "$DOTFILES/themes/$1/wallpaper.*" 2> /dev/null
nitrogen --head=2 --set-zoom-fill --save "$DOTFILES/themes/$1/wallpaper.*" 2> /dev/null
nitrogen --head=3 --set-zoom-fill --save "$DOTFILES/themes/$1/wallpaper.*" 2> /dev/null

$DOTFILES/bin/.reload